# Deploy Frontend to Netlify + Backend to Railway (Free Hosting)

## Tasks
- [x] Deploy backend to Render using existing render.yaml
- [x] Create render.yaml for frontend static site deployment
- [x] Update frontend JavaScript files to use the deployed backend URL
- [x] Fix render.yaml configuration issues (region, publishDir, staticSiteGenerator, plan, rootDir, buildCommand)
- [x] Deploy frontend to Render (Blueprint created, publishDir added)
- [x] Switch to Netlify + Railway (easier deployment)
- [x] Create netlify.toml for frontend deployment
- [x] Create railway.json for backend deployment
- [x] Update API_BASE_URL to Railway backend URL
- [x] Update CORS settings for Netlify domains
- [x] Add ignore rule to prevent Netlify rebuilds on backend changes
- [x] Remove old Vercel and Render config files to avoid confusion
- [x] Deploy frontend to Netlify (connect to GitHub repo)
- [x] Update all HTML files with Railway backend URL
- [x] Fix settings.py indentation error
- [x] Create admin user
- [x] Migrate database
- [x] Collect static files
- [x] Commit changes to git
- [x] Push code to GitHub
- [x] Deploy backend to Railway (add DJANGO_SUPERUSER_PASSWORD env var)
- [x] Fix Railway deployment Python path issue with nixpacks.toml
- [x] Fix Railway start command to bind to 0.0.0.0:$PORT
- [x] Add healthcheck configuration to railway.json
- [x] Add collectstatic to Railway start command
- [x] Move collectstatic to start command in nixpacks.toml
- [x] Fix Railway start command path
- [x] Fix pip command in nixpacks.toml to use python -m pip
- [x] Fix Railway backend URL in settings.py and update CSRF_TRUSTED_ORIGINS
- [x] Deploy frontend to Netlify
- [x] Remove Procfile (not needed for Railway)
- [x] Switch back to Railway from Heroku (free hosting)
- [x] Recreate railway.json and nixpacks.toml for Railway deployment
- [x] Update settings.py for Railway domains (.railway.app)
- [ ] Set Railway environment variables in dashboard:
  - SECRET_KEY: Generate a secure key (e.g., python -c "import secrets; print(secrets.token_urlsafe(50))")
  - DEBUG: False
  - DATABASE_URL: Provided by Railway (PostgreSQL)
  - DJANGO_SUPERUSER_PASSWORD: Set for admin user creation
  - EMAIL_HOST, EMAIL_HOST_USER, EMAIL_HOST_PASSWORD (if email needed)
  - FRONTEND_URL: https://prairesafricatravel.netlify.app
- [ ] Make Railway project public in dashboard
- [ ] Deploy and test Railway backend at: https://prairesafricatravel-production.up.railway.app
- [ ] Update frontend API_BASE_URL if Railway URL changes
- [ ] Test the full deployment
- [ ] Access admin panel at: https://prairesafricatravel-production.up.railway.app/admin/
- [ ] Frontend available at: https://prairies-africa.netlify.app/

## Railway Backend Deployment Checklist
- [x] railway.json configured with Nixpacks builder and start command
- [x] nixpacks.toml created for Railway deployment
- [x] requirements.txt includes all necessary packages (Django, DRF, gunicorn, dj-database-url, psycopg2-binary, whitenoise, etc.)
- [x] settings.py ALLOWED_HOSTS includes .railway.app
- [x] settings.py CSRF_TRUSTED_ORIGINS includes Railway URL
- [x] Procfile removed (not needed for Railway)
- [x] No runtime.txt needed (Railway uses Nixpacks)

## Notes
- Using Railway for backend deployment with Nixpacks (FREE hosting)
- Railway provides simple Django deployment with database
- Netlify handles static frontend with automatic deployments
- All configurations created and committed to GitHub
- Ready for deployment to both platforms
- Updated all HTML files (booking.html, booking-new.html, payment-status.html, upload-proof.html, test-api.html) with Railway backend URL
- Fixed Django settings.py indentation issue
- Created admin user for backend
- Database migrations applied
- Static files collected for production
- Railway uses Nixpacks for deployment, no runtime.txt needed
- Procfile removed as it's for Heroku, not Railway
- Switched back to Railway from Heroku due to cost concerns
